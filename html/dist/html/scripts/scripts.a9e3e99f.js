"use strict";function refreshLoop(a,b,c){timer=b(function(){console.log("Timeout executed",Date.now())},1e3),timer.then(function(){console.log("Timer resolved!"),c.status({},function(b){a.status=b}),a.poll&&refreshLoop(a,b,c)},function(){console.log("Timer rejected!")})}angular.module("htmlApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]);var timer;angular.module("htmlApp").controller("MainCtrl",["$scope","$timeout","MainFactory",function(a,b,c){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],a.refresh=function(){console.log("refresh"),a.poll?(a.text="Start polling",a.poll=!1):(a.text="Stop polling",a.poll=!0,refreshLoop(a,b,c))},a.poll=!1,a.text="Start polling",a.status="No status received"}]),angular.module("htmlApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("htmlApp").factory("MainFactory",["$resource",function(a){return a("/v1/twin/status",{},{status:{method:"GET",params:{}}})}]),angular.module("htmlApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/main.html",'<div class="jumbotron"> <p class="lead"><img src="images/golang.ce23e79a.png" width="80" height="80"> <br></p> <p>Hello Gopher</p> </div> <div class="row marketing"> <h4>Status from Anki Overdrive</h4> <p><a class="btn btn-lg btn-success" ng-click="refresh()">{{ text }}</a></p> <p> <table class="table table-striped"> <tr><td>Version</td><td>{{ status.version }}</td></tr> <tr><td>Level</td><td>{{ status.level }}</td></tr> <tr><td>Offset</td><td>{{ status.offset }}</td></tr> <tr><td>Speed</td><td>{{ status.speed }}</td></tr> <tr><td>Piece ID</td><td>{{ status.piece_id }}</td></tr> <tr><td>Piece Location</td><td>{{ status.piece_location }}</td></tr> </table> </p> </div>')}]);